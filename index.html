<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>نموذج تحقق من توكن Google OAuth</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .btn { padding: 10px 20px; background: #4285f4; color: white; border: none; cursor: pointer; border-radius: 5px; }
    #tokenDisplay { margin-top: 20px; word-break: break-all; }
  </style>
</head>
<body>
  <h2>تسجيل الدخول عبر جوجل (نموذج بسيط)</h2>

  <button class="btn" onclick="loginWithGoogle()">تسجيل الدخول</button>

  <div id="status" style="margin-top: 20px;">لم يتم تسجيل الدخول بعد</div>
  <div id="tokenDisplay"></div>

  <script>
    const clientId = '869200348342-ijiun242m66rsrj55pk87ttbd0ubs4hh.apps.googleusercontent.com';
    const redirectUri = 'https://ckashe.github.io/Chat/';
    const scope = 'https://www.googleapis.com/auth/drive.readonly';

    function loginWithGoogle() {
      const authUrl = `https://accounts.google.com/o/oauth2/v2/auth?client_id=${clientId}&redirect_uri=${encodeURIComponent(redirectUri)}&response_type=token&scope=${encodeURIComponent(scope)}&include_granted_scopes=true&state=login`;
      window.location.href = authUrl;
    }

    function getAccessTokenFromUrl() {
      const hash = window.location.hash.substr(1);
      const params = new URLSearchParams(hash);
      return params.get('access_token');
    }

    window.onload = () => {
      const token = getAccessTokenFromUrl();
      if (token) {
        // نظف الرابط من التوكن
        history.replaceState(null, '', window.location.pathname);
        document.getElementById('status').innerText = 'تم تسجيل الدخول بنجاح!';
        document.getElementById('tokenDisplay').innerText = 'Access Token: ' + token;
      }
    };
  </script>
</body>
</html>
